# StudyArena

StudyArenaã¯ã€å­¦ç¿’æ™‚é–“ã‚’è¨˜éŒ²ãƒ»ç®¡ç†ã—ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ç«¶ã„åˆã†ã“ã¨ãŒã§ãã‚‹iOSã‚¢ãƒ—ãƒªã§ã™ã€‚Firebaseã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ã—ã¦ä½¿ç”¨ã—ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿åŒæœŸã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã§ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

## æ©Ÿèƒ½

### ğŸ¯ ä¸»è¦æ©Ÿèƒ½
- **å­¦ç¿’ã‚¿ã‚¤ãƒãƒ¼**: é›†ä¸­æ™‚é–“ã‚’æ¸¬å®šãƒ»è¨˜éŒ²
- **å…¨å›½ãƒ©ãƒ³ã‚­ãƒ³ã‚°**: ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨å­¦ç¿’æ™‚é–“ã‚’ç«¶äº‰
- **å­¦ç¿’è¨˜éŒ²**: æ—¥åˆ¥ãƒ»æœŸé–“åˆ¥ã®å­¦ç¿’çµ±è¨ˆ
- **ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³**: å­¦ç¿’æ´»å‹•ã®å±¥æ­´è¡¨ç¤º
- **å ±é…¬ã‚·ã‚¹ãƒ†ãƒ **: å­¦ç¿’é”æˆã«å¿œã˜ãŸãƒãƒƒã‚¸ã‚„ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—
- **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç†**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã¨ã‚¢ãƒã‚¿ãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### ğŸ“± ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- **ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒ**: ç›®ã«å„ªã—ã„ãƒŸãƒ‹ãƒãƒ«ãªãƒ‡ã‚¶ã‚¤ãƒ³
- **ã‚¿ãƒ–ãƒ™ãƒ¼ã‚¹**: ç›´æ„Ÿçš„ãªãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**: FirebaseçµŒç”±ã§ã®å³åº§ãªåŒæœŸ
- **ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å¯¾å¿œ**: ã‚¢ãƒ—ãƒªã‚’é–‰ã˜ã¦ã‚‚å­¦ç¿’æ™‚é–“ã‚’è¿½è·¡

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **SwiftUI**: ãƒ¢ãƒ€ãƒ³ãªUIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **Combine**: ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°
- **Firebase**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹
  - Firebase Auth: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼
  - Firestore: NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
  - Firebase App Check: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- **UserNotifications**: ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
**Modular MVVM (Model-View-ViewModel + Services + Managers)**

- **Views (UI)**: SwiftUIã«ã‚ˆã‚‹ç”»é¢æç”»ã€‚`ViewModel`ã®çŠ¶æ…‹ã‚’ç›£è¦–ãƒ»åæ˜ ã—ã¾ã™ã€‚
- **ViewModels (Binding & Logic)**: Viewã¨Model/Serviceã®ä»²ä»‹å½¹ã€‚
    - UIã®çŠ¶æ…‹ç®¡ç† (`@Published`)
    - Combineã‚’ä½¿ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°
    - `Manager`ã‚„`Service`ã¸ã®å‡¦ç†å§”è­²
- **Managers (System & State)**: ã‚¢ãƒ—ãƒªå…¨ä½“ã®çŠ¶æ…‹ã‚„ã‚·ã‚¹ãƒ†ãƒ æ©Ÿèƒ½ã‚’ç®¡ç†ã€‚
    - `AuthManager`: èªè¨¼çŠ¶æ…‹ã®ç›£è¦–
    - `TimerManager`: ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å¯¾å¿œã®ã‚¿ã‚¤ãƒãƒ¼åˆ¶å¾¡
    - `NotificationManager`: ãƒ­ãƒ¼ã‚«ãƒ«é€šçŸ¥ã®ç®¡ç†
- **Services (Data Access)**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆFirebaseï¼‰ã¨ã®é€šä¿¡ã‚’æ‹…å½“ã€‚
    - `UserService`: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®CRUD
    - `StudyRecordService`: å­¦ç¿’è¨˜éŒ²ã®ä¿å­˜
    - `TimelineService`: ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ãƒ»æ›´æ–°

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
```text
StudyArena/
  â”œâ”€â”€ StudyArena.swift         # ã‚¢ãƒ—ãƒªã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆApp Checkè¨­å®šå«ã‚€ï¼‰
  â”œâ”€â”€ Managers/                # ã‚¢ãƒ—ãƒªå…¨ä½“ã®æ©Ÿèƒ½ç®¡ç† (Auth, Timer, Notification)
  â”œâ”€â”€ Services/                # ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ (Firebase Firestore)
  â”œâ”€â”€ ViewModels/              # ç”»é¢ã”ã¨ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
  â”œâ”€â”€ Views/                   # SwiftUI View
  â”‚   â”œâ”€â”€ Navigation/          # ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é–¢é€£
  â”‚   â””â”€â”€ ViewParts/           # å†åˆ©ç”¨å¯èƒ½ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  â”œâ”€â”€ Model/                   # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®šç¾©
  â””â”€â”€ Assets.xcassets/         # ç”»åƒãƒªã‚½ãƒ¼ã‚¹
```

### Firestore Data Structure

users/
  â”œâ”€â”€ {userId}/
  â”‚   â”œâ”€â”€ nickname: String
  â”‚   â”œâ”€â”€ totalStudyTime: Number
  â”‚   â”œâ”€â”€ level: Number
  â”‚   â”œâ”€â”€ avatarUrl: String
  â”‚   â””â”€â”€ createdAt: Timestamp

studyRecords/
  â”œâ”€â”€ {recordId}/
  â”‚   â”œâ”€â”€ userId: String
  â”‚   â”œâ”€â”€ duration: Number
  â”‚   â”œâ”€â”€ startTime: Timestamp
  â”‚   â””â”€â”€ endTime: Timestamp

departments/
  â”œâ”€â”€ {departmentId}/
  â”‚   â”œâ”€â”€ name: String
  â”‚   â”œâ”€â”€ memberCount: Number
  â”‚   â””â”€â”€ createdAt: Timestamp
```

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ä¾‹
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿èª­ã¿æ›¸ãå¯èƒ½
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // å­¦ç¿’è¨˜éŒ²ã¯èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿
    match /studyRecords/{recordId} {
      allow read, write: if request.auth != null;
    }
  }
}
```

## é–‹ç™º

### ãƒ‡ãƒãƒƒã‚°
- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œæ¸ˆã¿ï¼ˆãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨ï¼‰
- Firebaseã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼å¯¾å¿œ
- è©³ç´°ãªãƒ­ã‚°å‡ºåŠ›

### æ–°æ©Ÿèƒ½è¿½åŠ 
1. `MainViewModel.swift`ã«ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ 
2. å¯¾å¿œã™ã‚‹SwiftUIãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆ
3. `MainTabView.swift`ã«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 

### ãƒ†ã‚¹ãƒˆ
```swift
// Swift Testingãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨
import Testing

@Suite("StudyArena Tests")
struct StudyArenaTests {
    
    @Test("Timer calculation")
    func timerCalculation() async throws {
        let viewModel = MainViewModel()
        // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
    }
}
```

## è²¢çŒ®

1. Forkã‚’ä½œæˆ
2. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'Add amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. Pull Requestã‚’ä½œæˆ

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚è©³ç´°ã¯[LICENSE](LICENSE)ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

##
https://apps.apple.com/jp/app/studyarena/id6748235227?l=en-US

å•é¡Œã‚„è³ªå•ãŒã‚ã‚‹å ´åˆã¯ã€[Issues](../../issues)ã«ã¦å ±å‘Šã—ã¦ãã ã•ã„ã€‚

---
é–‹ç™ºè€…:Yasu
